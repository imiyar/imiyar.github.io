(function(t){function e(e){for(var i,o,s=e[0],u=e[1],l=e[2],f=0,d=[];f<s.length;f++)o=s[f],a[o]&&d.push(a[o][0]),a[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var u=n[s];0!==a[u]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"020c":function(t,e,n){"use strict";var i=n("c6fc"),a=n.n(i);a.a},"0238":function(t,e,n){},"027d":function(t,e,n){"use strict";var i=n("318f"),a=n.n(i);a.a},1:function(t,e){},"11f0":function(t,e,n){},"1bab":function(t,e,n){"use strict";var i=n("4ea7"),a=n.n(i);a.a},2084:function(t,e,n){},"23d9":function(t,e,n){},"318f":function(t,e,n){},"3c18":function(t,e,n){},"3e17":function(t,e,n){"use strict";var i=n("df4f"),a=n.n(i);a.a},"4ab3":function(t,e,n){"use strict";var i=n("9623"),a=n.n(i);a.a},"4ea7":function(t,e,n){},5661:function(t,e,n){"use strict";var i=n("0238"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("app-header",{staticClass:"app-header",attrs:{width:t.width},on:{ready:function(e){t.mainAnimStart=!0}}},[t._v("\n    [ PanoFrame ]\n  ")]),n("el-tabs",{ref:"main",staticClass:"app-main",style:{width:t.width},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[n("el-tab-pane",{style:t.styleObj,attrs:{label:"Preview",name:"preview"}},[n("app-preview")],1),n("el-tab-pane",{style:t.styleObj,attrs:{label:"Edit",name:"edit"}},[n("app-edit")],1)],1),n("app-footer",{staticClass:"app-footer",attrs:{width:t.width},on:{ready:function(e){t.mainAnimStart=!0}}},[n("p",[t._v("PanoFrame is designed and developed by ChangLIU.")]),n("a",{attrs:{href:""}},[t._v("View source")])])],1)},r=[],o=n("cffa"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("animated-width",t._b({on:{animfinished:function(e){return t.$emit("ready")}}},"animated-width",t.$attrs,!1),[n("div",{staticClass:"footer"},[n("div",{staticClass:"separator"}),n("span",[t._t("default")],2)])])},u=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"parent",staticClass:"anim-wrapper",style:{width:t.width}},[n("div",{staticClass:"anim",style:{width:this.animatedWidth+"px"}},[t._t("default")],2)])},c=[],f={name:"AnimatedWidth",props:{width:String},data:function(){return{animatedWidth:0}},watch:{width:function(){var t=this;this.$nextTick(function(){o["b"].to(t.$data,1,{animatedWidth:t.$refs.parent.offsetWidth,ease:o["a"].easeInOut,onComplete:function(){t.$emit("animfinished")}})})}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.$nextTick(function(){t.animatedWidth=t.$refs.parent.offsetWidth})}),this.$nextTick(function(){t.animatedWidth=t.$refs.parent.offsetWidth})}},d=f,m=(n("60ba"),n("2877")),h=Object(m["a"])(d,l,c,!1,null,"7049d98b",null),p=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player-wrapper",on:{mousedown:function(e){return t.$refs.input.focus()},touchstart:function(e){return t.$refs.input.focus()}}},[n("video",{ref:"panoPlayer",staticClass:"video-js vjs-fill",attrs:{controls:"",preload:"auto"}},[n("source",{attrs:{src:t.videoSource.src,type:t.videoSource.type}})]),n("input",{ref:"input",staticClass:"input"})])},y=[],b=(n("8e6e"),n("7f7f"),n("ac6a"),n("456d"),n("bd86")),g=n("f0e2"),O=(n("fda2"),n("2f62")),w=(n("fd24"),n("d185"),n("5df3"),n("1c4c"),n("6b54"),n("7618")),x=(n("ac4d"),n("8a81"),n("f0e2")),j=n("5a89");!function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==Object(w["a"])(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){t.exports=x},function(t,e){t.exports=j},function(t,e,n){},function(t,e,n){n.r(e);var i=n(0),a=n.n(i),r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==Object(w["a"])(Symbol.iterator)?function(t){return Object(w["a"])(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Object(w["a"])(t)})(t)}function s(t){return[t.clientX||t.touches&&t.touches[0].clientX,t.clientY||t.touches&&t.touches[0].clientY]}function u(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function l(t,e,n){var i=(90-t)*(Math.PI/180),a=e*(Math.PI/180);return[n*Math.sin(i)*Math.cos(a),n*Math.cos(i),n*Math.sin(i)*Math.sin(a)]}function c(t,e,n){var i=Math.abs(n);return Math.abs(t-e)<i?e:t+i*(t<e?1:-1)}function f(t){if(null===t||"object"!==o(t))return t;var e=Array.isArray(t)?[]:{};return Object.keys(t).forEach(function(n){e[n]=f(t[n])}),e}function d(t,e,n){if("number"!=typeof t)throw new Error("Camera position value is not a number.");return Math.max(e,Math.min(n,t))}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p=function(t,e){return{constructor:function(n){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.plugin=e,this.width=n.currentWidth(),this.height=n.currentHeight(),this.defaultFov=this.plugin.options.initFov,this.defaultLon=this.plugin.options.initLon,this.defaultLat=this.plugin.options.initLat,this.lon=this.defaultLon,this.lat=this.defaultLat,this.mouseDown=!1,this.isUserInteracting=!1,this.returning=!1,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onResize=this.onResize.bind(this),this.onPlay=this.onPlay.bind(this),this.onFullscreen=this.onFullscreen.bind(this),this.onEnded=this.onEnded.bind(this),this.scene=new r.Scene,this.camera=new r.PerspectiveCamera(this.defaultFov,this.width/this.height,1,1e3),(i=this.camera).lookAt.apply(i,h(l(this.lat,this.lon,500))),this.renderer=new r.WebGLRenderer,this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.autoClear=!1,this.geometry=new r.SphereBufferGeometry(500,60,40),this.geometry.scale(-1,1,1);var o=n.tech("").el();this.material=new r.MeshBasicMaterial({map:new r.VideoTexture(o)}),this.scene.add(new r.Mesh(this.geometry,this.material));var s=f(a);s.el=this.renderer.domElement,s.el.classList.add("vjs-panoplayer-canvas"),t.call(this,n,s),o.style.visibility="hidden",this.el().style.display="block",this.attachEventListeners(),this.hide()},attachEventListeners:function(){var t=this,e=this.player();if(this.on("mousedown",function(e){return t.onMouseDown(e)}),this.on("mousemove",function(e){return t.onMouseMove(e)}),this.on("mouseup",function(e){return t.onMouseUp(e)}),this.on("mousewheel",function(e){return t.onMouseWheel(e)}),this.on("DOMMouseScroll",function(e){return t.onMouseWheel(e)}),this.on("dispose",function(){return t.onDispose()}),this.el().addEventListener("touchstart",function(e){return t.onTouchStart(e)},{passive:!1}),this.el().addEventListener("touchmove",function(e){return t.onTouchMove(e)},{passive:!1}),this.el().addEventListener("touchend",function(e){return t.onTouchEnd(e)},{passive:!1}),e.on("mouseenter",this.onMouseEnter),e.on("mouseleave",this.onMouseLeave),e.on("fullscreenchange",this.onResize),e.on("playerresize",this.onResize),e.on("ended",this.onEnded),e.on("firstplay",this.onPlay),this.plugin.options.isIOS){var n=e.controlBar.fullscreenToggle;n.off("tap",n.handleClick),n.on("tap",this.onFullscreen)}},animate:function(){this.animationId=this.requestAnimationFrame(this.animate.bind(this)),this.render()},render:function(){var t=!1,e=this.plugin.options;this.returning=e.autoBackToDefault&&!this.isUserInteracting,this.returning&&(this.lat!==this.defaultLat&&0!==e.returnStepLat&&(t=!0,this.lat=c(this.lat,this.defaultLat,e.returnStepLat)),this.lon!==this.defaultLon&&0!==e.returnStepLon&&(t=!0,this.lon=c(this.lon,this.defaultLon,e.returnStepLon)),this.camera.fov!==this.defaultFov&&0!==e.returnStepFov&&(t=!0,this.camera.fov=c(this.camera.fov,this.defaultFov,e.returnStepFov))),t&&(this.update(),this.plugin.trigger("returning")),this.renderer.render(this.scene,this.camera)},update:function(){var t;(t=this.camera).lookAt.apply(t,h(l(this.lat,this.lon,500))),this.camera.updateProjectionMatrix(),this.plugin.trigger("camerapositionchange")},onMouseDown:function(t){if(t.preventDefault(),!this.player().ended()){var e=m(s(t),2),n=e[0],i=e[1];if("undefined"===n||"undefined"===i)return;this.mouseDown=!0,this.isUserInteracting=!0,this.onPointerDownPointerX=n,this.onPointerDownPointerY=i,this.onPointerDownLon=this.lon,this.onPointerDownLat=this.lat}},onMouseMove:function(t){if(t.preventDefault(),this.mouseDown){var e,n=m(s(t),2),i=n[0],a=n[1];if("undefined"===i||"undefined"===a)return;var r=this.plugin.options;this.lat=.15*(a-this.onPointerDownPointerY)+this.onPointerDownLat,this.lon=.15*(this.onPointerDownPointerX-i)+this.onPointerDownLon,this.lat=d(this.lat,r.minLat,r.maxLat),this.lon=d(this.lon,r.minLon,r.maxLon),(e=this.camera).lookAt.apply(e,h(l(this.lat,this.lon,500))),this.plugin.trigger("camerapositionchange")}},onMouseUp:function(t){t.preventDefault(),this.mouseDown=!1},onMouseEnter:function(){this.isUserInteracting=!0},onMouseLeave:function(){this.isUserInteracting=!1,this.mouseDown=!1},onMouseWheel:function(t){t.preventDefault(),this.camera.fov+=function(t){var e=0;return"detail"in t&&(e=t.detail),"wheelDelta"in t&&(e=-t.wheelDelta/100),"wheelDeltaY"in t&&(e=-t.wheelDeltaY/100),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=0),e}(t),this.camera.fov=d(this.camera.fov,this.plugin.options.minFov,this.plugin.options.maxFov),this.camera.updateProjectionMatrix(),this.plugin.trigger("camerapositionchange")},onTouchStart:function(t){this.isUserInteracting=!0,t.touches.length>1&&(this.isUserPinch=!0,this.multiTouchDistance=u(t.touches)),this.onMouseDown(t)},onTouchEnd:function(t){this.isUserInteracting=!1,this.isUserPinch=!1,this.onMouseUp(t)},onTouchMove:function(t){if(!this.isUserPinch||t.touches.length<=1)this.onMouseMove(t);else{var e=u(t.touches);t.wheelDeltaY=10*(e-this.multiTouchDistance),this.onMouseWheel(t),this.multiTouchDistance=e}},onResize:function(){this.width=this.player().currentWidth(),this.height=this.player().currentHeight(),this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.plugin.trigger("camerapositionchange")},onPlay:function(){this.defaultFov=this.plugin.options.initFov,this.defaultLon=this.plugin.options.initLon,this.defaultLat=this.plugin.options.initLat,this.lat=this.defaultLat,this.lon=this.defaultLon,this.camera.fov=this.defaultFov,this.update(),this.animate(),this.show()},onFullscreen:function(){var t=this.player();t.isFullscreen()?(t.isFullscreen(!1),t.exitFullWindow(),this.onResize()):(t.isFullscreen(!0),t.enterFullWindow(),this.onResize())},onEnded:function(){this.animationId&&this.cancelAnimationFrame(this.animationId),this.player().hasStarted(!1)},onDispose:function(){this.animationId&&this.cancelAnimationFrame(this.animationId);var t=this.player();t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("fullscreenchange",this.onResize),t.off("playerresize",this.onResize),t.off("firstplay",this.onPlay);var e=t.controlBar.fullscreenToggle;e.off("tap",this.onFullscreen),e.on("tap",e.handleClick),t.tech("").el().style.visibility="visible"}}},v=function(t,e){return{constructor:function(n,i){var a=this;t.call(this,n,i),this.plugin=e,this.addClass("vjs-message-box"),this.el().innerHTML=i.message,this.autoFadeOut=this.autoFadeOut.bind(this),this.hideOnPlay=this.hideOnPlay.bind(this),i.autoFadeOut&&(this.hide(),n.one("play",this.autoFadeOut)),i.hideOnPlay&&n.one("play",this.hideOnPlay),this.on("dispose",function(){return a.onDispose()})},autoFadeOut:function(){var t=this;this.show(),this.setTimeout(function(){t.addClass("vjs-message-box-hidden")},1e3),this.setTimeout(function(){return t.hide()},3e3)},hideOnPlay:function(){this.hide()},onDispose:function(){var t=this.player();t.off("play",this.autoFadeOut),t.off("play",this.hideOnPlay)}}},y=function(t,e){return{constructor:function(n,i){var a=this;t.call(this,n,i),this.plugin=e,this.update(),this.on(["click","tap"],function(){a.plugin.options.autoBackToDefault=!a.plugin.options.autoBackToDefault,a.update()})},update:function(){this.plugin.options.autoBackToDefault?(this.el().title="Auto-Return Off",this.removeClass("vjs-return-button-on"),this.addClass("vjs-return-button-off")):(this.el().title="Auto-Return On",this.removeClass("vjs-return-button-off"),this.addClass("vjs-return-button-on"))}}},b={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),isMobile:!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))),isIos:!!/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(navigator.userAgent),getWebGLErrorMessage:function(){return this.webgl?"Your browser support WebGL.":window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/">here</a>.'].join("\n")}};function g(t){return(g="function"==typeof Symbol&&"symbol"==Object(w["a"])(Symbol.iterator)?function(t){return Object(w["a"])(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":Object(w["a"])(t)})(t)}function O(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n(2);var C={initFov:75,initLon:0,initLat:0,maxFov:100,minFov:50,minLat:-85,maxLat:85,minLon:-1/0,maxLon:1/0,returnStepLat:1,returnStepLon:1,returnStepFov:1,autoBackToDefault:!b.isMobile,isIOS:b.isIos,callback:null},T={webGLError:"Your video will be played as a normal video.",dragAndDrop:"Please drag and drop the video"},L=a.a.getPlugin("plugin"),S=function(t){function e(t,n){var i,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=k(e).call(this,t),(i=!o||"object"!==g(o)&&"function"!=typeof o?x(r):o).isReady=!1,i.options=a.a.mergeOptions(C,n),i.options.initLat=d(i.options.initLat,i.options.minLat,i.options.maxLat),i.options.initLon=d(i.options.initLon,i.options.minLon,i.options.maxLon),i.options.initFov=d(i.options.initFov,i.options.minFov,i.options.maxFov);var s=a.a.getComponent("Component");a.a.registerComponent("PanoCanvas",a.a.extend(s,p(s,x(i)))),a.a.registerComponent("MessageBox",a.a.extend(s,v(s,x(i))));var u=a.a.getComponent("Button");return a.a.registerComponent("ReturnButton",a.a.extend(u,y(u,x(i)))),i.player.ready(function(){if(i.player.addClass("vjs-pano-player"),i.player.playsinline(!0),b.webgl){var t=i.player.getChild("ControlBar");i.returnButton=t.addChild("ReturnButton",{},t.children().length-1),i.messageBox=i.player.addChild("MessageBox",{message:T.dragAndDrop,autoFadeOut:!0,hideOnPlay:!1}),i.panoCanvas=i.player.addChild("PanoCanvas");var e=t.getChild("PictureInPictureToggle");e&&t.removeChild(e)}else i.messageBox=i.player.addChild("MessageBox",{message:"".concat(b.getWebGLErrorMessage(),"\n").concat(T.webGLError),autoFadeOut:!1,hideOnPlay:!0});i.options.callback&&"function"==typeof i.options.callback&&i.options.callback(),i.isReady=!0,i.trigger("ready")}),i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,L),n=e,(i=[{key:"init",value:function(t){return void 0===t?{lat:this.options.initLat,lon:this.options.initLon,fov:this.options.initFov}:("object"===g(t)&&("number"==typeof t.lat&&(this.options.initLat=d(t.lat,this.options.minLat,this.options.maxLat)),"number"==typeof t.lon&&(this.options.initLon=d(t.lon,this.options.minLon,this.options.maxLon)),"number"==typeof t.fov&&(this.options.initFov=d(t.fov,this.options.minFov,this.options.maxFov))),this)}},{key:"default",value:function(t){return void 0===t?{lat:this.panoCanvas.defaultLat,lon:this.panoCanvas.defaultLon,fov:this.panoCanvas.defaultFov}:("object"===g(t)&&("number"==typeof t.lat&&(this.panoCanvas.defaultLat=d(t.lat,this.options.minLat,this.options.maxLat)),"number"==typeof t.lon&&(this.panoCanvas.defaultLon=d(t.lon,this.options.minLon,this.options.maxLon)),"number"==typeof t.fov&&(this.panoCanvas.defaultFov=d(t.fov,this.options.minFov,this.options.maxFov))),this)}},{key:"current",value:function(t){return void 0===t?{lat:this.panoCanvas.lat,lon:this.panoCanvas.lon,fov:this.panoCanvas.camera.fov}:("object"===g(t)&&("number"==typeof t.lat&&(this.panoCanvas.lat=d(t.lat,this.options.minLat,this.options.maxLat),this.panoCanvas.update()),"number"==typeof t.lon&&(this.panoCanvas.lon=d(t.lon,this.options.minLon,this.options.maxLon),this.panoCanvas.update()),"number"==typeof t.fov&&(this.panoCanvas.camera.fov=d(t.fov,this.options.minFov,this.options.maxFov),this.panoCanvas.camera.updateProjectionMatrix())),this)}},{key:"max",value:function(t){if(void 0===t)return{lat:this.options.maxLat,lon:this.options.maxLon,fov:this.options.maxLov};if("object"===g(t)){if("number"==typeof t.lat){if(t.lat<this.options.minLat)throw new Error("Maximum latitude is smaller than minimum latitude.");this.options.maxLat=t.lat,this.panoCanvas.lat>t.lat&&this.current({lat:t.lat}),this.panoCanvas.defaultLat>t.lat&&this.default({lat:t.lat})}if("number"==typeof t.lon){if(t.lon<this.options.minLon)throw new Error("Maximum longitude is smaller than minimum longitude.");this.options.maxLon=t.lon,this.panoCanvas.lon>t.lon&&this.current({lon:t.lon}),this.panoCanvas.defaultLon>t.lon&&this.default({lon:t.lon})}if("number"==typeof t.fov){if(t.fov<this.options.minFov)throw new Error("Maximum FoV is smaller than minimum FoV.");this.options.maxFov=t.fov,this.panoCanvas.camera.fov>t.fov&&this.current({fov:t.fov}),this.panoCanvas.defaultFov>t.fov&&this.default({fov:t.fov})}}return this}},{key:"min",value:function(t){if(void 0===t)return{lat:this.options.minLat,lon:this.options.minLon,fov:this.options.minLov};if("object"===g(t)){if("number"==typeof t.lat){if(t.lat>this.options.maxLat)throw new Error("Minimum latitude is larger than maximum latitude.");this.options.minLat=t.lat,this.panoCanvas.lat<t.lat&&this.current({lat:t.lat}),this.panoCanvas.defaultLat<t.lat&&this.default({lat:t.lat})}if("number"==typeof t.lon){if(t.lon>this.options.maxLon)throw new Error("Minimum longitude is larger than maximum longitude.");this.options.minLon=t.lon,this.panoCanvas.lon<t.lon&&this.current({lon:t.lon}),this.panoCanvas.defaultLon<t.lon&&this.default({lon:t.lon})}if("number"==typeof t.fov){if(t.fov>this.options.maxFov)throw new Error("Minimum FoV is larger than maximum Fov.");this.options.minFov=t.fov,this.panoCanvas.camera.fov<t.fov&&this.current({fov:t.fov}),this.panoCanvas.defaultFov<t.fov&&this.default({fov:t.fov})}}return this}},{key:"returnStep",value:function(t){return void 0===t?{lat:this.options.returnStepLat,lon:this.options.returnStepLon,fov:this.options.returnStepLov}:("object"===g(t)&&("number"==typeof t.lat&&(this.options.returnStepLat=t.lat),"number"==typeof t.lon&&(this.options.returnStepLon=t.lon),"number"==typeof t.fov&&(this.options.returnStepFov=t.fov)),this)}},{key:"autoBackToDefault",value:function(t){return void 0===t?this.options.autoBackToDefault:(this.options.autoBackToDefault=!!t,this.returnButton.update(),this)}},{key:"backToDefault",value:function(){return this.returnButton.return=!0,this}},{key:"isDefaultPosition",value:function(){return this.panoCanvas.lat===this.panoCanvas.defaultLat&&this.panoCanvas.lon===this.panoCanvas.defaultLon&&this.panoCanvas.camera.fov===this.panoCanvas.defaultFov}},{key:"dispose",value:function(){this.player.removeClass("vjs-pano-player"),this.panoCanvas&&(this.player.removeChild(this.panoCanvas),this.panoCanvas.dispose()),this.messageBox&&(this.player.removeChild("MessageBox"),this.messageBox.dispose()),this.returnButton&&(this.player.getChild("ControlBar").removeChild(this.returnButton),this.returnButton.dispose()),this.player.pause(),this.player.currentTime(0),j(k(e.prototype),"dispose",this).call(this)}},{key:"ready",value:function(t){return this.isReady?t():this.on("ready",t),this}}])&&O(n.prototype,i),r&&O(n,r),e}();a.a.registerPlugin("panoPlayer",S)}]);n("23d9");function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var C={name:"VideoPlayer",props:{name:String},data:function(){return{player:null,panoPlayer:null,nextKeyframeIndex:{lat:0,lon:0,fov:0,rate:0,subtitle:0},subtitleEndTime:0}},computed:P({},Object(O["d"])("player",["muteOnStart","init","min","max","return","needUpdate"]),{},Object(O["d"])("timeline",["keyframeTime","keyframes"]),{},Object(O["d"])(["mode"]),{},Object(O["b"])("player",["panoOptions","videoSource","narrativeData"]),{},Object(O["b"])("timeline",["findPos"]),{names:function(){return Object.keys(this.keyframes)}}),watch:{mode:function(t){t!==this.name&&this.player.pause()},videoSource:function(t){null!==this.player&&this.player.src(t)},narrativeData:function(){this.player.currentTime(0),this.player.pause(),this.player.hasStarted(!1)},muteOnStart:function(t){this.player.muted(t)},keyframeTime:function(t){this.player.hasStarted()&&(this.player.currentTime(t),this.player.pause())},init:{handler:function(t){var e=this;this.panoPlayer.init(t);var n=Object.keys(this.nextKeyframeIndex);n.forEach(function(n){0===e.nextKeyframeIndex[n]&&e.update(n,t[n],0)})},deep:!0},max:{handler:function(t){this.panoPlayer.max(t)},deep:!0},min:{handler:function(t){this.panoPlayer.min(t)},deep:!0},return:{handler:function(t){this.panoPlayer.returnStep(t)},deep:!0},needUpdate:function(t){""!==t&&(this.findKeyframePos(t,this.player.currentTime()),this.$emit("updated"))}},mounted:function(){var t=this;this.player=Object(g["default"])(this.$refs.panoPlayer),this.panoPlayer=this.player.panoPlayer(this.panoOptions),this.player.ready(function(){t.player.on("loadedmetadata",function(){t.$emit("loadedmetadata",t.player.duration())}),t.player.on("firstplay",function(){t.player.playbackRate(t.init.rate),t.player.muted(t.muteOnStart)}),t.player.on("timeupdate",function(){var e=t.player.currentTime();t.names.forEach(function(n){var i=t.nextKeyframeIndex[n],a=t.keyframes[n][i];a&&e>=a.time?("subtitle"===n&&(t.subtitleEndTime=a.endTime),t.update(n,a.value,i+1)):"subtitle"===n&&e>t.subtitleEndTime&&t.update(n,"",i)}),t.$emit("timeupdate",t.player.currentTime())}),t.player.on("seeked",function(){var e=t.player.currentTime();t.names.forEach(function(n){t.findKeyframePos(n,e)})})}),this.panoPlayer.ready(function(){t.panoPlayer.on("camerapositionchange",function(){t.$emit("camerapositionchange",t.panoPlayer.current())})})},methods:{update:function(t,e,n){switch(t){case"rate":this.player.playbackRate(e);break;case"subtitle":this.$emit("subtitlechange",e);break;default:this.panoPlayer.default(Object(b["a"])({},t,e))}this.$emit("defaultchange",{name:t,value:e}),this.nextKeyframeIndex[t]=n},findKeyframePos:function(t,e){var n=this.findPos(t,e),i=n.item,a=n.index;"subtitle"===t?(this.subtitleEndTime=i.endTime,this.update(t,e<=i.endTime?i.value:"",a+1)):this.update(t,i.value,a+1)}}},T=C,L=(n("701e"),Object(m["a"])(T,v,y,!1,null,"60797748",null)),S=L.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-validation"},[t.label?n("label",{style:{paddingRight:t.gutter}},[t._v("\n    "+t._s(t.label)+"\n  ")]):t._e(),n("el-input-number",{ref:"input",staticClass:"input-number",attrs:{"controls-position":"right",size:"mini",step:"rate"===t.name?.1:1,"step-strictly":!0,placeholder:t.placeholder},on:{change:t.changeHandler},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}})],1)},_=[],E=(n("c5f6"),n("9e1f"),n("450d"),n("6ed5")),M=n.n(E),I=(n("28a5"),n("768b"));function $(t){if("number"!==typeof t)return"";var e=t,n=[];return n.push(Math.floor(e/3600)),e%=3600,n.push(Math.floor(e/60)),n.push(Math.floor(e%60)),n=n.map(function(t){return t<10?"0".concat(t):t}),n.join(":")}function F(t){if("string"!==typeof t)return 0;var e=t.split(":"),n=Object(I["a"])(e,3),i=n[0],a=n[1],r=n[2];return 3600*parseInt(i,10)+60*parseInt(a,10)+parseInt(r,10)}function V(t,e,n){var i=.5,a=t.length-1,r=0,o=0;while(a>=r){o=Math.floor((a+r)/2);var s=t[o].time-e;if(s>=i)a=o-1;else{if(!(s<-i))return{found:!0,index:o,item:t[o]};r=o+1}}return{found:!1,index:a,item:-1===a?n:t[a]}}function A(t){if(null===t||"object"!==Object(w["a"])(t))return t;var e=Array.isArray(t)?[]:{};return Object.keys(t).forEach(function(n){e[n]=A(t[n])}),e}function H(t,e){var n;return function(){for(var i=this,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];clearTimeout(n),n=setTimeout(function(){t.apply(i,r)},e)}}var K=H(function(t,e){M.a.alert(t,e)},200),W={name:"InputNumberValidation",props:{name:String,value:Number,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},label:{type:String,default:""},gutter:{type:String,default:"0px"},boundaryValidation:{type:Boolean,default:!1},keyframeValidation:{type:Boolean,default:!1},keyframeBoundary:{type:String,default:"max"},emptyValidation:{type:Boolean,default:!0}},data:function(){return{inputValue:this.value,placeholder:String(this.value)}},computed:{keyframes:function(){return this.$store.state.timeline.keyframes[this.name]}},watch:{value:function(t){this.inputValue=t,this.placeholder=String(t)}},methods:{changeHandler:function(t){var e=this,n=!0;if(this.emptyValidation&&void 0===t&&(n=!1),this.boundaryValidation&&(t>this.max?(this.debouncedAlert("This value should be smaller than ".concat(this.max," according to your player settings"),"Fail",{type:"error"}),n=!1):t<this.min&&(this.debouncedAlert("This value should be larger than ".concat(this.min," according to your player settings"),"Fail",{type:"error"}),n=!1)),this.keyframeValidation)for(var i=0;i<this.keyframes.length;i+=1){var a=this.keyframes[i].value-t;if(a="max"===this.keyframeBoundary?a:-a,a>0){this.debouncedAlert("You have one or more keyframes whose values are larger than ".concat(t),"Fail",{type:"error"}),n=!1;break}}n?(this.inputValue=t,this.placeholder=String(t),this.$emit("input",t)):(this.inputValue=parseInt(this.placeholder,10),this.$nextTick(function(){e.$refs.input.currentValue=parseInt(e.placeholder,10),e.$nextTick(function(){e.$refs.input.$refs.input.$refs.input.value=""})}))},debouncedAlert:K}},B=W,R=(n("f842"),Object(m["a"])(B,D,_,!1,null,"d22b50ca",null)),z=R.exports,U={name:"AppFooter",components:{AnimatedWidth:p},inheritAttrs:!1},N=U,Y=(n("4ab3"),Object(m["a"])(N,s,u,!1,null,"3bab9b36",null)),G=Y.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("animated-width",t._b({on:{animfinished:function(e){return t.$emit("ready")}}},"animated-width",t.$attrs,!1),[n("div",{staticClass:"header"},[n("div",{staticClass:"header-title"},[n("span",[t._t("default")],2)]),n("div",{staticClass:"header-button-group"},[n("el-button",{attrs:{size:"small",type:"primary",round:"",plain:""},on:{click:t.upload}},[t._v("\n        Upload JSON\n      ")]),n("el-button",{attrs:{size:"small",type:"primary",round:"",plain:""},on:{click:t.download}},[t._v("\n        Download JSON\n      ")]),n("input",{ref:"uploadLink",staticClass:"upload-input",attrs:{type:"file",value:""}}),n("a",{ref:"downloadLink",attrs:{download:"PanoFrameSettings.json"}})],1)])])},q=[],J={name:"AppHeader",components:{AnimatedWidth:p},inheritAttrs:!1,mounted:function(){var t=this;this.$refs.uploadLink.onchange=function(e){var n=new FileReader;n.readAsText(e.target.files[0]),n.onload=function(e){var n=JSON.parse(e.target.result);t.$store.commit("loadData",n),t.$refs.uploadLink.value="",t.$store.commit("player/clearPlayerData")}}},methods:{download:function(){var t=this.$store.state.player,e={videoId:t.videoId,muteOnStart:t.muteOnStart,init:t.init,max:t.max,min:t.min,return:t.return,title:t.title,keyframes:this.$store.state.timeline.keyframes},n=new Blob([JSON.stringify(e)],{type:"application/json"}),i=URL.createObjectURL(n);this.$refs.downloadLink.href=i,this.$refs.downloadLink.click()},upload:function(){this.$refs.uploadLink.click()}}},Z=J,Q=(n("020c"),Object(m["a"])(Z,X,q,!1,null,"38545dbc",null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preview"},[n("div",{staticClass:"player"},[n("video-player",{attrs:{name:"preview"},on:{subtitlechange:function(e){t.subtitle=e}}})],1),n("div",{staticClass:"title"},[n("span",[t._v(t._s(t.title))])]),n("div",{staticClass:"subtitle"},[n("span",[t._v(t._s(t.subtitle))])])])},nt=[];function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var rt={name:"AppPreview",components:{VideoPlayer:S},data:function(){return{subtitle:""}},computed:at({},Object(O["d"])("player",["title"]))},ot=rt,st=(n("3e17"),Object(m["a"])(ot,et,nt,!1,null,"a47467e2",null)),ut=st.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit"},[n("div",{staticClass:"edit-info"},[n("video-player",{staticClass:"video-player",attrs:{name:"edit"},on:{defaultchange:t.setDefault,camerapositionchange:t.setCurrent,timeupdate:t.setCurrentTime,loadedmetadata:t.setDuration,updated:function(e){return t.setNeedUpdate("")}}}),n("angle-info",{staticClass:"angle-info"}),n("video-info",{staticClass:"video-info"})],1),n("el-tabs",{ref:"panel",staticClass:"edit-panel",attrs:{"tab-position":"left"}},[n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"Video Track"}},[n("video-track")],1),n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"Text Track"}},[n("text-track")],1),n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"Player Settings"}},[n("player-settings")],1)],1)],1)},ct=[],ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"angle-info"},t._l(t.settings,function(e){return n("div",{key:e.id,staticClass:"angle-display"},[n("div",{staticClass:"circle"},[n("div",{staticClass:"line",style:{transform:"rotate("+(e.value-90)+"deg)"}}),n("span",{staticClass:"number"},[t._v(t._s(e.value))])]),n("p",{staticClass:"text"},[t._v(t._s(e.text))])])}),0)},dt=[];function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var pt={name:"AngleInfo",computed:ht({},Object(O["d"])("player",["current"]),{settings:function(){return[{id:0,text:"Latitude",value:this.current.lat},{id:1,text:"Longitude",value:this.current.lon}]}})},vt=pt,yt=(n("7102"),Object(m["a"])(vt,ft,dt,!1,null,"25d20b4e",null)),bt=yt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},t._l(t.tableData,function(e){return n("div",{key:e.name,staticClass:"row"},[n("div",{staticClass:"col"},[t._v(t._s(e.name))]),n("div",{staticClass:"col"},[t._v(t._s(e.value))])])}),0)},Ot=[];function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var jt={name:"VideoInfo",data:function(){return{cellStyleObj:{border:"none",padding:"10px 0",verticalAlign:"top"}}},computed:xt({},Object(O["b"])("player",["tableData"]),{height:function(){return"edit"===this.$store.state.mode?this.$refs.container.offsetHeight:0}})},kt=jt,Pt=(n("7c32"),Object(m["a"])(kt,gt,Ot,!1,null,"854a98c6",null)),Ct=Pt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"setting-item"},[n("div",{staticClass:"setting-name"},[t._v("Keyframe Time: ")]),n("div",{staticClass:"setting-input"},[n("time-picker")],1),n("div",{staticClass:"setting-timeline no-arrow"},[n("timeline-bar")],1)]),t._l(t.settings,function(e){return n("div",{key:e.name,staticClass:"setting-item"},[n("div",{staticClass:"setting-name"},[t._v("\n      "+t._s(e.text)+"\n    ")]),n("div",{staticClass:"setting-input"},[n("timeline-input",{attrs:{name:e.name}})],1),n("div",{staticClass:"setting-timeline"},[n("timeline-keyframe",{attrs:{name:e.name}})],1)])})],2)},Lt=[],St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timeline-input"},[n("input-number-validation",{ref:"inputNumber",staticClass:"input-number",attrs:{value:t.value,name:t.name,max:t.maxValue,min:t.minValue,boundaryValidation:!0},on:{input:t.inputHandler}}),n("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary",plain:"",circle:""},on:{click:t.addHandler}}),n("el-button",{attrs:{icon:"el-icon-minus",size:"mini",type:"primary",plain:"",circle:""},on:{click:t.removeHandler}})],1)},Dt=[];function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Mt={name:"TimelineInput",components:{InputNumberValidation:z},props:{name:String},data:function(){return{value:0}},computed:Et({},Object(O["d"])("timeline",["keyframeTime"]),{},Object(O["b"])("timeline",["findPos"]),{initValue:function(){return this.$store.state.player.init[this.name]},maxValue:function(){return this.$store.state.player.max[this.name]},minValue:function(){return this.$store.state.player.min[this.name]},keyframes:function(){return this.$store.state.timeline.keyframes[this.name]},keyframePos:function(){return this.$store.getters["timeline/keyframePos"][this.name]}}),watch:{keyframePos:{handler:function(t){var e=this;this.value=t.item.value,t.found?this.$nextTick(function(){e.$refs.inputNumber.$refs.input.currentValue=e.value}):this.$nextTick(function(){e.$refs.inputNumber.$refs.input.currentValue=void 0})},deep:!0,immediate:!0}},methods:Et({},Object(O["c"])("timeline",["addKeyframe","setKeyframe","removeKeyframe"]),{},Object(O["c"])("player",["setNeedUpdate"]),{inputHandler:function(t){this.value=t,this.keyframePos.found?(this.setKeyframe({name:this.name,index:this.keyframePos.index,item:{time:this.keyframeTime,value:this.value}}),this.setNeedUpdate(this.name)):void 0!==t&&this.addHandler()},addHandler:function(){this.keyframePos.found||(this.addKeyframe({name:this.name,index:this.keyframePos.index+1,item:{time:this.keyframeTime,value:this.value}}),this.setNeedUpdate(this.name))},removeHandler:function(){this.keyframePos.found&&(this.setKeyframe({name:this.name,index:this.keyframePos.index,item:{time:this.keyframeTime,value:this.keyframePos.index>0?this.keyframes[this.keyframePos.index-1].value:this.initValue}}),this.removeKeyframe({name:this.name,index:this.keyframePos.index}),this.setNeedUpdate(this.name))}})},It=Mt,$t=(n("1bab"),Object(m["a"])(It,St,Dt,!1,null,"21befd7c",null)),Ft=$t.exports,Vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:t.showLoading,expression:"showLoading",modifiers:{fullscreen:!0}}],staticClass:"timeline-keyframe",attrs:{"element-loading-text":"Loading...","element-loading-background":"rgba(0, 0, 0, 0.2)"}},[n("div",{staticClass:"btns"},[n("span",{staticClass:"el-icon-caret-left btn",on:{click:t.previousKeyframe}}),n("span",{staticClass:"el-icon-caret-right btn",on:{click:t.nextKeyframe}})]),n("div",{staticClass:"container"},[t.duration?n("div",t._l(t.keyframes,function(e,i){return n("div",{key:e.time,class:["keyframe",{active:i===t.keyframePos.index&&t.keyframePos.found}],style:{left:e.time/t.duration*100+"%"},attrs:{title:t.title(e)},on:{click:function(n){return t.setKeyframeTime(e.time)}}})}),0):t._e()])])},At=[];function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Kt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Wt={name:"TimelineKeyframe",props:{name:String},computed:Kt({},Object(O["d"])("player",["duration"]),{keyframes:function(){return this.$store.state.timeline.keyframes[this.name]},keyframePos:function(){return this.$store.getters["timeline/keyframePos"][this.name]},showLoading:function(){return null===this.duration||void 0===this.duration}}),methods:Kt({},Object(O["c"])("timeline",["setKeyframeTime"]),{previousKeyframe:function(){var t=this.keyframePos.found?this.keyframePos.index-1:this.keyframePos.index;t<0?this.setKeyframeTime(0):this.setKeyframeTime(this.keyframes[t].time)},nextKeyframe:function(){this.keyframePos.index>=this.keyframes.length-1?this.setKeyframeTime(this.duration):this.setKeyframeTime(this.keyframes[this.keyframePos.index+1].time)},title:function(t){return"time: ".concat($(t.time),", value: ").concat(t.value)}})},Bt=Wt,Rt=(n("62e9"),Object(m["a"])(Bt,Vt,At,!1,null,"6f9858d8",null)),zt=Rt.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"container"},[n("div",{staticClass:"bar",style:{left:100*this.left+"%"}},[n("div",{staticClass:"rect",on:{mousedown:function(e){return e.preventDefault(),t.mousedownHandler(e)},touchstart:function(e){return e.preventDefault(),t.mousedownHandler(e)}}}),n("div",{staticClass:"line"})])])},Nt=[];function Yt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yt(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Xt={name:"TimelineBar",data:function(){return{width:0,offset:0,isInteracting:!1}},computed:Gt({},Object(O["d"])(["mode"]),{},Object(O["d"])("player",["duration"]),{},Object(O["d"])("timeline",["keyframeTime"]),{left:{get:function(){return null!==this.duration?this.keyframeTime/this.duration:0},set:function(t){null!==this.duration&&this.setKeyframeTime(t*this.duration)}}}),watch:{mode:function(t){var e=this;"edit"===t&&this.$nextTick(function(){return e.updateWidth()})},immediate:!0},mounted:function(){this.$nextTick(function(){this.updateWidth(),document.addEventListener("mouseup",this.mouseupHandler.bind(this)),document.addEventListener("touchend",this.mouseupHandler.bind(this)),document.addEventListener("mousemove",this.mousemoveHandler.bind(this),{passive:!1}),document.addEventListener("touchmove",this.mousemoveHandler.bind(this),{passive:!1}),window.addEventListener("resize",this.updateWidth.bind(this)),window.addEventListener("orientationchange",this.updateWidth.bind(this))})},methods:Gt({},Object(O["c"])("timeline",["setKeyframeTime"]),{mousedownHandler:function(){this.isInteracting=!0,this.offset=this.$refs.container.getBoundingClientRect().left},mousemoveHandler:function(t){if(this.isInteracting){t.preventDefault();var e=(t.clientX||t.touches[0].clientX)-this.offset;this.left=Math.max(0,Math.min(this.width,e))/this.width}},mouseupHandler:function(){this.isInteracting&&(this.setKeyframeTime(Math.round(this.left*this.duration)),this.isInteracting=!1)},updateWidth:function(){this.$refs.container&&(this.width=this.$refs.container.scrollWidth)}})},qt=Xt,Jt=(n("d9db"),Object(m["a"])(qt,Ut,Nt,!1,null,"326c80fe",null)),Zt=Jt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-time-picker",{staticClass:"time-picker",attrs:{size:"mini","value-format":"HH:mm:ss",value:t.formattedKeyframeTime,"picker-options":t.pickerOptions},on:{input:t.setKeyframeTime}})},te=[];function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var ie={name:"TimePicker",computed:ne({},Object(O["b"])("player",["formattedDuration"]),{},Object(O["b"])("timeline",["formattedKeyframeTime"]),{pickerOptions:function(){return{selectableRange:"00:00:00 - ".concat(this.formattedDuration)}}}),methods:ne({},Object(O["c"])("timeline",["setKeyframeTime"]))},ae=ie,re=(n("f6fd"),Object(m["a"])(ae,Qt,te,!1,null,"110af4ff",null)),oe=re.exports,se={name:"VideoTrack",components:{TimePicker:oe,TimelineInput:Ft,TimelineKeyframe:zt,TimelineBar:Zt},data:function(){return{settings:[{text:"Latitude: ",name:"lat"},{text:"Longitude: ",name:"lon"},{text:"Field of View: ",name:"fov"},{text:"Playback Rate: ",name:"rate"}]}}},ue=se,le=(n("5661"),Object(m["a"])(ue,Tt,Lt,!1,null,"f9566974",null)),ce=le.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"setting-item"},[n("div",{staticClass:"setting-name"},[t._v("Title: ")]),n("div",{staticClass:"setting-col1"},[n("el-input",{staticClass:"title",attrs:{size:"mini"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),n("div",{staticClass:"setting-col2"})]),n("div",{staticClass:"setting-item"},[n("div",{staticClass:"setting-name"},[t._v("Subtitle: ")]),n("div",{staticClass:"setting-col1"},[n("el-button",{staticClass:"btn",attrs:{icon:"el-icon-plus",size:"mini",type:"primary",plain:"",circle:""},on:{click:t.addHandler}}),n("el-time-picker",{staticClass:"time-picker",attrs:{"value-format":"HH:mm:ss",size:"mini",placeholder:"Start Time","picker-options":t.startOptions},on:{change:t.changeHandler},model:{value:t.formattedStartTime,callback:function(e){t.formattedStartTime=e},expression:"formattedStartTime"}}),n("span",{staticClass:"separator"},[t._v(" - ")]),n("el-time-picker",{staticClass:"time-picker",attrs:{"value-format":"HH:mm:ss",size:"mini",placeholder:"End Time","picker-options":t.endOptions},model:{value:t.formattedEndTime,callback:function(e){t.formattedEndTime=e},expression:"formattedEndTime"}})],1),n("div",{staticClass:"setting-col2"},[n("el-input",{staticClass:"title",attrs:{size:"mini"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)]),n("div",{staticClass:"subtitle"},t._l(t.keyframes.subtitle,function(e,i){return n("div",{key:e.time,staticClass:"setting-item"},[n("div",{staticClass:"setting-name"}),n("div",{staticClass:"setting-col1"},[n("el-button",{staticClass:"btn",attrs:{icon:"el-icon-minus",size:"mini",type:"primary",plain:"",circle:""},on:{click:function(e){return t.removeHandler(i)}}}),n("span",{staticClass:"time"},[t._v(t._s(t.subtitleTimeRange[i]))])],1),n("div",{staticClass:"setting-col2"},[t._v("\n        "+t._s(e.value)+"\n      ")])])}),0)])},de=[];function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var pe={name:"TextTrack",data:function(){return{startTime:void 0,endTime:void 0,text:""}},computed:he({},Object(O["d"])("player",["duration"]),{},Object(O["d"])("timeline",["keyframes"]),{},Object(O["b"])("player",["formattedDuration"]),{},Object(O["b"])("timeline",["findPos","subtitleTimeRange"]),{formattedStartTime:{get:function(){return $(this.startTime)},set:function(t){this.startTime=F(t)}},formattedEndTime:{get:function(){return $(this.endTime)},set:function(t){this.endTime=F(t)}},startOptions:function(){var t=""!==this.formattedEndTime?this.formattedEndTime:this.formattedDuration;return{selectableRange:"00:00:00 - ".concat(t)}},endOptions:function(){var t=""!==this.formattedStartTime?this.formattedStartTime:"00:00:00";return{selectableRange:"".concat(t," - ").concat(this.formattedDuration)}},title:{get:function(){return this.$store.state.player.title},set:function(t){this.$store.commit("player/setTitle",t)}},subtitlePos:function(){return this.findPos("subtitle",this.startTime)}}),methods:he({},Object(O["c"])("timeline",["addKeyframe","setKeyframe","removeKeyframe"]),{},Object(O["c"])("player",["setNeedUpdate"]),{addHandler:function(){if(void 0!==this.startTime&&""!==this.text){var t=void 0===this.endTime?this.duration:this.endTime;this.subtitlePos.found?this.setKeyframe({name:"subtitle",index:this.subtitlePos.index,item:{time:this.startTime,endTime:t,value:this.text}}):this.addKeyframe({name:"subtitle",index:this.subtitlePos.index+1,item:{time:this.startTime,endTime:t,value:this.text}}),this.setNeedUpdate("subtitle"),this.startTime=void 0,this.endTime=void 0,this.text=""}},changeHandler:function(){this.subtitlePos.found&&(this.text=this.subtitlePos.item.value,this.endTime=this.subtitlePos.item.endTime)},removeHandler:function(t){this.removeKeyframe({name:"subtitle",index:t}),this.setNeedUpdate("subtitle")}})},ve=pe,ye=(n("d782"),Object(m["a"])(ve,fe,de,!1,null,"0cca2e67",null)),be=ye.exports,ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.choices,function(e){return n("div",{key:e.text,staticClass:"setting-item"},[n("div",{staticClass:"setting-name"},[t._v("\n      "+t._s(e.text)+"\n    ")]),n("div",{staticClass:"setting-content"},t._l(e.list,function(i){return n("el-radio",{key:i.id,attrs:{value:e.value,label:i.id},on:{input:e.handler}},[t._v("\n        "+t._s(i.text)+"\n      ")])}),1)])}),t._l(t.inputData,function(e){return n("div",{key:e.name,staticClass:"setting-item"},[n("div",{staticClass:"setting-name"},[t._v(t._s(e.text))]),n("input-group",{staticClass:"setting-content",attrs:{name:e.name}})],1)})],2)},Oe=[],we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group"},[n("input-number-validation",t._b({attrs:{value:t.initVal,name:t.name,max:t.maxVal,min:t.minVal},on:{input:function(e){return t.setInit({name:t.name,value:e})}}},"input-number-validation",t.settingInit,!1)),n("input-number-validation",t._b({attrs:{value:t.maxVal,name:t.name,max:t.maxMax,min:t.initVal},on:{input:function(e){return t.setMax({name:t.name,value:e})}}},"input-number-validation",t.settingMax,!1)),n("input-number-validation",t._b({attrs:{value:t.minVal,name:t.name,max:t.initVal,min:t.minMin},on:{input:function(e){return t.setMin({name:t.name,value:e})}}},"input-number-validation",t.settingMin,!1)),n("input-number-validation",t._b({attrs:{value:t.returnVal,name:t.name,max:1/0,min:0},on:{input:function(e){return t.setReturn({name:t.name,value:e})}}},"input-number-validation",t.settingReturn,!1))],1)},xe=[];function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Pe={name:"InputGroup",components:{InputNumberValidation:z},props:{name:{type:String,required:!0}},data:function(){return{}},computed:{initVal:function(){return this.$store.state.player.init[this.name]},maxVal:function(){return this.$store.state.player.max[this.name]},minVal:function(){return this.$store.state.player.min[this.name]},returnVal:function(){return this.$store.state.player.return[this.name]},maxMax:function(){return"fov"===this.name?179:"lat"===this.name?89:1/0},minMin:function(){return"fov"===this.name?1:"lat"===this.name?-89:-1/0},settingInit:function(){return{label:"Initial: ",gutter:"5px",boundaryValidation:!0,keyframeValidation:!1,emptyValidation:!0}},settingMax:function(){return{label:"Maximum: ",gutter:"5px",boundaryValidation:!0,keyframeValidation:!0,keyframeBoundary:"max",emptyValidation:!0}},settingMin:function(){return{label:"Minimum: ",gutter:"5px",boundaryValidation:!0,keyframeValidation:!0,keyframeBoundary:"min",emptyValidation:!0}},settingReturn:function(){return{label:"Returning Speed: ",gutter:"5px",boundaryValidation:!0,keyframeValidation:!1,emptyValidation:!0}}},methods:ke({},Object(O["c"])("player",["setInit","setMax","setMin","setReturn"]))},Ce=Pe,Te=(n("fc5a"),Object(m["a"])(Ce,we,xe,!1,null,"c6ddda30",null)),Le=Te.exports;function Se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Se(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Se(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var _e={name:"PlayerSettings",components:{InputGroup:Le},data:function(){return{inputData:[{text:"Latitude:",name:"lat"},{text:"Longitude:",name:"lon"},{text:"Field of View:",name:"fov"}]}},computed:De({},Object(O["d"])("player",["videoList","videoId","narrativeId","muteOnStart"]),{},Object(O["b"])("player",["narrativeList","narrativeData"]),{choices:function(){return[{text:"Video Source: ",list:this.videoList,value:this.videoId,handler:this.sourceHandler},{text:"Use Sample Narratives: ",list:[{id:-1,text:"None"}].concat(this.narrativeList),value:this.narrativeId,handler:this.narrativeHandler},{text:"Mute on Start: ",list:[{id:!0,text:"Yes"},{id:!1,text:"No"}],value:this.muteOnStart,handler:this.setMuteOnStart}]}}),methods:De({},Object(O["c"])(["loadData"]),{},Object(O["c"])("player",["setVideoId","setNarrativeId","setMuteOnStart","clearPlayerData"]),{},Object(O["c"])("timeline",["clearKeyframes"]),{sourceHandler:function(t){var e=this;M.a.confirm("Changing video source will remove all your keyframe data. Continue?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.setVideoId(t),e.clearKeyframes(),e.clearPlayerData()}).catch(function(){})},narrativeHandler:function(t){var e=this;M.a.confirm("Changing sample narrative will remove all your keyframe data. Continue?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.setNarrativeId(t),e.clearPlayerData(),-1===t?e.clearKeyframes():e.loadData(e.narrativeData)}).catch(function(){})}})},Ee=_e,Me=(n("83e4"),Object(m["a"])(Ee,ge,Oe,!1,null,"2dc79886",null)),Ie=Me.exports;function $e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$e(n,!0).forEach(function(e){Object(b["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$e(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Ve={name:"AppEdit",components:{VideoPlayer:S,AngleInfo:bt,VideoInfo:Ct,VideoTrack:ce,TextTrack:be,PlayerSettings:Ie},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.panel.$el.children[1].style.height="100%"})},methods:Fe({},Object(O["c"])("player",["setDuration","setDefault","setCurrentTime","setCurrent","setNeedUpdate"]))},Ae=Ve,He=(n("027d"),Object(m["a"])(Ae,lt,ct,!1,null,"a02b2d54",null)),Ke=He.exports,We={name:"App",components:{AppHeader:tt,AppFooter:G,AppPreview:ut,AppEdit:Ke},data:function(){return{tabContentHeight:"".concat(window.innerHeight-215,"px"),mainAnimStart:!0,navElem:null,navParent:null}},computed:{mode:{get:function(){return this.$store.state.mode},set:function(t){this.$store.commit("setMode",t)}},width:function(){return"preview"===this.mode?"60%":"100%"},styleObj:function(){return{height:this.tabContentHeight,minHeight:"550px",transition:"opacity 1s",opacity:this.mainAnimStart?1:0}}},watch:{mode:function(){var t=this,e={width:this.navElem.offsetWidth};this.$nextTick(function(){o["b"].to(e,1,{width:t.navParent.offsetWidth,ease:o["a"].easeInOut,onUpdate:function(){t.navElem.style.width="".concat(e.width,"px")}})}),this.mainAnimStart=!1}},mounted:function(){var t=this;this.$nextTick(function(){t.navParent=t.$refs.main.$el.children[0],t.navParent.style.height="40px",t.navElem=t.$refs.main.$refs.nav.$el,t.navElem.style.cssText="\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: ".concat(t.navParent.offsetWidth,"px;")}),window.addEventListener("resize",function(){t.tabContentHeight="".concat(window.innerHeight-215,"px"),t.navElem.style.width="".concat(t.navParent.offsetWidth,"px")}),window.addEventListener("orientationchange",function(){t.tabContentHeight="".concat(window.innerHeight-215,"px"),t.navElem.style.width="".concat(t.navParent.offsetWidth,"px")}),window.nlad=function(){document.addEventListener("touchmove",function(t){1!==t.scale&&t.preventDefault()},!1);var t=0;document.addEventListener("touchend",function(e){var n=(new Date).getTime();n-t<=300&&e.preventDefault(),t=n},!1)}}},Be=We,Re=(n("5c0b"),Object(m["a"])(Be,a,r,!1,null,null,null)),ze=Re.exports,Ue=(n("4917"),{videoList:[{id:0,text:"Yojiya Cafe",src:"./videos/Yojiya Cafe.mp4",type:"video/mp4"},{id:1,text:"MIT Chapel",src:"./videos/MIT Chapel.mp4",type:"video/mp4"}],narrativeList:[[{id:0,text:"Yojiya's Coffee & Environment",data:{videoId:0,muteOnStart:!0,init:{lat:0,lon:85,fov:90,rate:1,subtitle:""},max:{lat:85,lon:360,fov:100},min:{lat:-85,lon:-360,fov:50},return:{lat:1,lon:1,fov:1},title:"Yojiya's Coffee & Environment",keyframes:{lat:[{time:42,value:-25},{time:55,value:-50},{time:65,value:-30},{time:85,value:-3}],lon:[{time:10,value:160},{time:20,value:85},{time:26,value:20},{time:33,value:85},{time:42,value:130},{time:55,value:82},{time:65,value:266},{time:85,value:78}],fov:[{time:42,value:50}],rate:[{time:0,value:1.5},{time:85,value:2}],subtitle:[{time:0,endTime:10,value:"Yojiya is a brand from Kyoto famous for their oil blotting paper and other cosmetics."},{time:10,endTime:20,value:"Besides cosmetics, Yojiya have also opened a caf located near Hanamiko-ji Street in the Gion area."},{time:20,endTime:35,value:"The comfortable atmosphere and great environment makes you feel cozy inside."},{time:35,endTime:42,value:'Yojiya\'s logo is  widely known as the "face of Yojiya." It can be seen everywhere in this coffee shop.'},{time:42,endTime:56,value:"This is the most famous matcha cappuccino with the face of Yojiya painted in matcha. The face is delicate and the coffee tastes very good."},{time:56,endTime:66,value:"Even the napkin is well designed with their lovely logo."},{time:70,endTime:85,value:"Their desserts are also delicious and served beautifully. I wish I could show your those desserts we ordered, but nothing left in the plate when we took this video."},{time:90,endTime:120,value:"There are many souvenirs (T-shirts, candy, postcards, etc.) on the shelf over there. Travellers usually get some souvenirs here for their friends and family before leaving. "}]}}},{id:1,text:"Weekend Afternoon with Friends",data:{videoId:0,muteOnStart:!1,init:{lat:-10,lon:-35,fov:60,rate:1,subtitle:""},max:{lat:85,lon:360,fov:100},min:{lat:-85,lon:-360,fov:40},return:{lat:1,lon:1,fov:1},title:"Weekend Afternoon with Friends",keyframes:{lat:[{time:4,value:10},{time:10,value:0},{time:20,value:0},{time:30,value:-10},{time:52,value:-10},{time:98,value:-30}],lon:[{time:4,value:-145},{time:10,value:-215},{time:20,value:-180},{time:30,value:-135},{time:52,value:-30},{time:70,value:-220},{time:98,value:-230}],fov:[{time:20,value:90},{time:30,value:75},{time:98,value:40}],rate:[{time:0,value:1.5},{time:20,value:1},{time:30,value:2.5},{time:47,value:1.5},{time:70,value:2.5}],subtitle:[{time:0,endTime:18,value:"One weekend afternoon, me and my friends Holly and Wenzhe went to Yojiya Cafe in Kyoto. We just finished our dishes and decided to record a panoramic video of me drinking Yojiya's famous matcha cappuccino."},{time:18,endTime:24,value:'I used a straw to drink from the bottom in order to keep the "face of Yojiya" on top of the coffee as long as possible.'},{time:24,endTime:30,value:'Holly said, "Wow, amazing! It (the face) is moving down!"'},{time:30,endTime:52,value:"Holly took out the napkin and wanted to show Yojiya's logo on the napkin in front of the camera. We all love the logo's specific design."},{time:52,endTime:70,value:"But Wenzhe prefered to wipe his hand and face using his napkin, without considering the fact that we will use this video for a presentation."},{time:70,endTime:98,value:'I was not sure about whether the "face of Yojiya" still can be seen from the camera at that time.'},{time:98,endTime:120,value:"You can barely see it because of the cream left on the side of the glass. We should have use the 360 camera's app to preview the video before we startted recording."}]}}}],[]],init:{lat:0,lon:0,fov:75,rate:1,subtitle:""},max:{lat:85,lon:360,fov:100},min:{lat:-85,lon:-360,fov:50},return:{lat:1,lon:1,fov:1}}),Ne={namespaced:!0,state:{videoList:Ue.videoList,videoId:0,narrativeId:-1,muteOnStart:!0,currentTime:0,duration:void 0,init:A(Ue.init),max:A(Ue.max),min:A(Ue.min),return:A(Ue.return),default:A(Ue.init),current:{lat:Ue.init.lat,lon:Ue.init.lon,fov:Ue.init.fov},needUpdate:"",title:Ue.videoList[0].text},getters:{narrativeList:function(t){return Ue.narrativeList[t.videoId]},videoSource:function(t){return{src:t.videoList[t.videoId].src,type:t.videoList[t.videoId].type}},narrativeData:function(t,e){return-1===t.narrativeId?null:e.narrativeList[t.narrativeId].data},panoOptions:function(t){return{initLat:t.init.lat,initLon:t.init.lon,initFov:t.init.fov,maxLat:t.max.lat,maxLon:t.max.lon,maxFov:t.max.fov,minLat:t.min.lat,minLon:t.min.lon,minFov:t.min.fov,returnStepLat:t.return.lat,returnStepLon:t.return.lon,returnStepFov:t.return.fov}},tableData:function(t,e){return[{name:"Video Source:",value:e.videoSource.src.match(/[^\/]+$/)[0]},{name:"Current Time:",value:"".concat(e.formattedCurrentTime," / ").concat(e.formattedDuration)},{name:"Current Field of View:",value:t.current.fov},{name:"Default Latitude:",value:t.default.lat},{name:"Default Longitude:",value:t.default.lon},{name:"Default Field of View:",value:t.default.fov},{name:"Playback Rate:",value:t.default.rate},{name:"Title:",value:t.title},{name:"Subtitle:",value:t.default.subtitle}]},formattedCurrentTime:function(t){return $(t.currentTime)},formattedDuration:function(t){return $(t.duration)}},mutations:{setVideoId:function(t,e){t.duration=null,t.videoId=e,t.narrativeId=-1,t.title=Ue.videoList[e].text},setNarrativeId:function(t,e){t.narrativeId=e},setMuteOnStart:function(t,e){t.muteOnStart=e},setInit:function(t,e){t.init[e.name]=e.value},setMax:function(t,e){t.max[e.name]=e.value},setMin:function(t,e){t.min[e.name]=e.value},setReturn:function(t,e){t.return[e.name]=e.value},setDefault:function(t,e){t.default[e.name]=e.value},setCurrent:function(t,e){t.current.lat=Math.round(e.lat),t.current.lon=Math.round(e.lon),t.current.fov=Math.round(e.fov)},setCurrentTime:function(t,e){t.currentTime=e},setDuration:function(t,e){t.duration=e},setNeedUpdate:function(t,e){t.needUpdate=e},setTitle:function(t,e){t.title=e},clearPlayerData:function(t){t.default=A(Ue.init),t.current={lat:Ue.init.lat,lon:Ue.init.lon,fov:Ue.init.fov}}}},Ye={namespaced:!0,state:{keyframes:{lat:[],lon:[],fov:[],rate:[],subtitle:[]},keyframeTime:0},getters:{formattedKeyframeTime:function(t){return $(t.keyframeTime)},findPos:function(t,e,n){return function(e,i){return V(t.keyframes[e],i,{time:-1,value:n.player.init[e]})}},keyframePos:function(t,e,n){var i=Object.keys(t.keyframes),a={};return i.forEach(function(e){a[e]=V(t.keyframes[e],t.keyframeTime,{time:-1,value:n.player.init[e]})}),a},subtitleTimeRange:function(t){var e=[];return t.keyframes.subtitle.forEach(function(t){e.push("".concat($(t.time)," - ").concat($(t.endTime)))}),e}},mutations:{addKeyframe:function(t,e){t.keyframes[e.name].splice(e.index,0,e.item)},removeKeyframe:function(t,e){t.keyframes[e.name].splice(e.index,1)},setKeyframe:function(t,e){i["default"].set(t.keyframes[e.name],e.index,e.item)},setKeyframeTime:function(t,e){"number"===typeof e?t.keyframeTime=e:"string"===typeof e&&(t.keyframeTime=F(e))},clearKeyframes:function(t){t.keyframes={lat:[],lon:[],fov:[],rate:[],subtitle:[]},t.keyframeTime=0}}};i["default"].use(O["a"]);var Ge=new O["a"].Store({modules:{player:Ne,timeline:Ye},state:{mode:"preview"},mutations:{setMode:function(t,e){t.mode=e},loadData:function(t,e){null!==e&&(e.videoId!==t.player.videoId&&(t.player.duration=null,t.player.videoId=e.videoId),t.player.muteOnStart=e.muteOnStart,t.player.init=e.init,t.player.max=e.max,t.player.min=e.min,t.player.return=e.return,t.player.title=e.title,t.timeline.keyframes=e.keyframes)}}}),Xe=(n("be4f"),n("896a")),qe=n.n(Xe),Je=(n("4ffc"),n("946e")),Ze=n.n(Je),Qe=(n("b5d8"),n("f494")),tn=n.n(Qe),en=(n("9d4c"),n("e450")),nn=n.n(en),an=(n("10cb"),n("f3ad")),rn=n.n(an),on=(n("560b"),n("dcdc")),sn=n.n(on),un=(n("bd49"),n("18ff")),ln=n.n(un),cn=(n("960d"),n("defb")),fn=n.n(cn),dn=(n("cb70"),n("b370")),mn=n.n(dn),hn=(n("e612"),n("dd87")),pn=n.n(hn),vn=(n("075a"),n("72aa")),yn=n.n(vn),bn=(n("1951"),n("eedf")),gn=n.n(bn),On=n("b2d6"),wn=n.n(On),xn=n("4897"),jn=n.n(xn);n("e05f");jn.a.use(wn.a),i["default"].use(gn.a),i["default"].use(yn.a),i["default"].use(pn.a),i["default"].use(mn.a),i["default"].use(fn.a),i["default"].use(ln.a),i["default"].use(sn.a),i["default"].use(rn.a),i["default"].use(nn.a),i["default"].use(tn.a),i["default"].use(Ze.a),i["default"].use(qe.a);n("9225");new i["default"]({store:Ge,render:function(t){return t(ze)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("5e27"),a=n.n(i);a.a},"5e27":function(t,e,n){},"60ba":function(t,e,n){"use strict";var i=n("3c18"),a=n.n(i);a.a},"62e9":function(t,e,n){"use strict";var i=n("f59e"),a=n.n(i);a.a},"67cd":function(t,e,n){},"701e":function(t,e,n){"use strict";var i=n("7e4a"),a=n.n(i);a.a},7102:function(t,e,n){"use strict";var i=n("bee5"),a=n.n(i);a.a},"7c32":function(t,e,n){"use strict";var i=n("9131"),a=n.n(i);a.a},"7e4a":function(t,e,n){},"83e4":function(t,e,n){"use strict";var i=n("67cd"),a=n.n(i);a.a},9131:function(t,e,n){},9225:function(t,e,n){},9623:function(t,e,n){},b416:function(t,e,n){},bee5:function(t,e,n){},c6fc:function(t,e,n){},d782:function(t,e,n){"use strict";var i=n("b416"),a=n.n(i);a.a},d9db:function(t,e,n){"use strict";var i=n("11f0"),a=n.n(i);a.a},df4f:function(t,e,n){},eda5:function(t,e,n){},ef40:function(t,e,n){},f59e:function(t,e,n){},f6fd:function(t,e,n){"use strict";var i=n("2084"),a=n.n(i);a.a},f842:function(t,e,n){"use strict";var i=n("ef40"),a=n.n(i);a.a},fc5a:function(t,e,n){"use strict";var i=n("eda5"),a=n.n(i);a.a}});